"""
Команда для імпорту статей з JSON
python manage.py import_articles
"""
import json
from django.core.management.base import BaseCommand
from django.contrib.auth.models import User
from django.utils import timezone
from articles.models import Article, Category, Tag
from datetime import datetime


class Command(BaseCommand):
    help = 'Імпортує статті з JSON. Використовуйте --append для додавання без видалення.'

    def add_arguments(self, parser):
        parser.add_argument(
            '--append',
            action='store_true',
            help='Додати статті без видалення існуючих',
        )

    def handle(self, *args, **options):
        append_mode = options['append']
        
        if not append_mode:
            # Видалити всі існуючі статті
            self.stdout.write('Видалення наявних статей...')
            deleted_count = Article.objects.all().delete()[0]
            self.stdout.write(self.style.SUCCESS(f'  ✓ Видалено {deleted_count} статей'))
        else:
            self.stdout.write('Режим додавання: існуючі статті залишаються...')
        
        # JSON дані
        articles_data = [
            {
                "title": "ONUKA презентувала новий сингл із симфонічним оркестром",
                "slug": "onuka-prezentuvala-novyi-synhl-iz-symfonichnym-orkestrom",
                "short_description": "Українська електронна артистка ONUKA випустила новий трек у співпраці з Національним симфонічним оркестром. Премʼєра вже доступна на стримінгах.",
                "content": "Українська електронна виконавиця ONUKA презентувала новий сингл «Світло в тобі», записаний у співпраці з Національним симфонічним оркестром України. Премʼєра відбулася одночасно на всіх основних стримінгових платформах.\n\nНовий трек поєднує фірмове електронне звучання артистки з живими оркестровими аранжуваннями. За словами музикантки, ідея співпраці з оркестром виникла ще під час минулорічного туру, коли стало зрозуміло, що її композиції можуть органічно звучати у великій симфонічній формі.\n\nКомпозиція побудована на поступовому наростанні напруги: від мінімалістичних електронних мотивів до масштабної кульмінації з духовими та струнними партіями. Текст пісні торкається теми внутрішньої сили та пошуку світла в непрості часи.\n\nПремʼєра супроводжувалася відео, знятим у київському концертному залі. Режисером кліпу став молодий український постановник, який раніше працював із кількома інді-гуртами.\n\nУ найближчих планах ONUKA — серія живих виступів із оркестром у Києві та Львові.",
                "category": "Новини",
                "tags": ["українська", "електронна", "премʼєра", "концерт"],
                "author_username": "editor",
                "is_featured": True,
                "status": "published",
                "published_at": "2026-02-10T12:00:00Z",
                "meta_title": "ONUKA випустила новий сингл із симфонічним оркестром",
                "meta_description": "ONUKA представила нову композицію, записану разом із симфонічним оркестром. Деталі премʼєри та плани на концерти."
            },
            {
                "title": "Інтервʼю: Христина Соловій про новий альбом та музичну свободу",
                "slug": "interviu-khrystyna-solovii-pro-novyi-albom-ta-muzychnu-svobodu",
                "short_description": "Співачка розповіла про роботу над новим матеріалом, натхнення та виклики сучасної музичної індустрії.",
                "content": "— Христина, ваш новий альбом суттєво відрізняється від попередніх робіт. Чому ви вирішили змінити звучання?\n\n— Мені хотілося вийти за межі звичного фолкового формату і спробувати більш електронне звучання. Це був природний етап розвитку.\n\n— Чи було страшно експериментувати?\n\n— Завжди є страх. Але творчість без ризику не має сенсу.\n\n— Яка пісня з альбому для вас найбільш особиста?\n\n— Композиція «Дихання». Вона написана в дуже складний період мого життя.\n\n— Як ви оцінюєте сучасну українську сцену?\n\n— Вона надзвичайно різноманітна. Зʼявилося багато сильних інді-артистів.\n\n— Які плани на найближчий рік?\n\n— Тур Україною та робота над акустичною програмою.\n\n— Що для вас означає музична свобода?\n\n— Можливість говорити щиро й не підлаштовуватися під тренди.\n\n— Чи є артист, з яким мрієте зробити колаборацію?\n\n— Так, але поки що збережу інтригу.\n\n— Що ви порадите молодим музикантам?\n\n— Бути чесними з собою і не боятися помилок.",
                "category": "Інтервʼю",
                "tags": ["інтервʼю", "українська", "альбом"],
                "author_username": "journalist",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-09T14:00:00Z"
            },
            {
                "title": "Рецензія: Новий альбом гурту «Late Night Echo» — зрілий крок уперед",
                "slug": "retsenziia-late-night-echo-novyi-albom",
                "short_description": "Розбираємо третій студійний альбом інді-рок гурту та оцінюємо його еволюцію звучання.",
                "content": "Третій студійний альбом «Late Night Echo» демонструє впевнений розвиток гурту. Якщо ранні роботи тяжіли до сирого гітарного звучання, то нова платівка звучить більш продакшн-орієнтовано.\n\nПерший трек одразу задає атмосферу — меланхолійні синтезатори поєднуються з глибоким вокалом фронтмена. Особливо варто відзначити композицію «Gravity Lines», де ритм-секція працює бездоганно.\n\nТексти стали більш особистими. Гурт говорить про втрату, дорослішання та прийняття змін.\n\nЗагалом альбом звучить цілісно й концептуально. Це не набір пісень, а завершена історія.\n\nОцінка: 8,5/10.",
                "category": "Рецензії",
                "tags": ["альбом", "рок", "рецензія"],
                "author_username": "critic",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-08T16:00:00Z"
            },
            {
                "title": "Як TikTok змінює музичну індустрію: аналітичний погляд",
                "slug": "tiktok-zminiuie-muzychnu-industriiu-analitika",
                "short_description": "Розглядаємо вплив коротких відео на популярність треків та формування нових зірок.",
                "content": "За останні кілька років TikTok став ключовим інструментом просування музики. Багато треків стають вірусними саме завдяки коротким відео.\n\nАналітика показує, що понад 60% нових артистів отримують перші мільйони прослуховувань після появи їхніх треків у трендах.\n\nАлгоритми платформи дозволяють навіть маловідомим виконавцям швидко здобути аудиторію. Однак залежність від вірусності створює нові виклики — артисти починають орієнтуватися на формат 15–30 секунд.\n\nМузична індустрія адаптується: лейбли активно співпрацюють із тікток-креаторами, а продюсери враховують «вірусний потенціал» треків.\n\nПопри це, довготривалий успіх усе ще залежить від якості матеріалу.",
                "category": "Аналітика",
                "tags": ["аналітика", "електронна", "премʼєра"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-07T10:00:00Z"
            },
            {
                "title": "5 українських джазових альбомів, які варто послухати цієї зими",
                "slug": "5-ukrainskykh-dzhazovykh-albomiv-tsiiei-zymy",
                "short_description": "Добірка сучасних українських джазових релізів для затишних зимових вечорів.",
                "content": "Українська джазова сцена активно розвивається. Ми підготували добірку з пʼяти альбомів, які варто додати до свого плейлиста.\n\n1. «Blue Horizon» — сучасний джаз із елементами нео-соулу.\n2. «Night Conversations» — камерна атмосфера та глибокі фортепіанні партії.\n3. «Urban Improvisation» — експериментальний підхід до традиційних форм.\n4. «Warm Lights» — мʼяке звучання саксофона.\n5. «Silent Waves» — мінімалістичний проєкт із живим записом.\n\nЦі альбоми демонструють різноманітність української сцени.",
                "category": "Добірки",
                "tags": ["джаз", "українська", "альбом"],
                "author_username": "journalist",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-06T18:00:00Z"
            },
            {
                "title": "Чому музика стала головною мовою покоління Z",
                "slug": "chomu-muzyka-stala-movoiu-pokolinnia-z",
                "short_description": "Авторська колонка про культурні зміни та роль музики в самовираженні молоді.",
                "content": "Покоління Z живе в епоху надлишку інформації. У цьому шумі музика стає способом швидкого самовираження.\n\nПлейлисти замінюють щоденники, а пісні стають маркером ідентичності. Молодь не просто слухає музику — вона проживає її.\n\nСтрімінгові сервіси створили нову екосистему, де кожен може знайти свій саундтрек.\n\nМожливо, саме тому музика сьогодні звучить голосніше за будь-які інші культурні форми.",
                "category": "Авторські колонки",
                "tags": ["аналітика", "українська"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-05T20:00:00Z"
            },
            {
                "title": "Інтервʼю: Марта Дорош про новий інді-альбом, сцену воєнного часу та внутрішню тишу",
                "slug": "interviu-marta-dorosh-pro-novyi-indi-albom-ta-stsenu-voiennoho-chasu",
                "short_description": "Інді-рок артистка Марта Дорош розповіла про створення нового альбому, концерти під час війни та пошук власного звучання.",
                "content": "— Марто, твій новий альбом звучить значно більш зріло, ніж попередні роботи. Що змінилося?\n\n— Я змінилася. За останні роки ми всі подорослішали дуже швидко. Альбом народився не з бажання зробити «хіт», а з потреби проговорити власний досвід. Це музика про втрату, про страх, але й про надію.\n\n— У звучанні зʼявилося більше електроніки. Чому?\n\n— Мені хотілося додати холодного повітря у звук. Гітари залишилися, але синтезатори дали можливість створити іншу атмосферу — більш відсторонену, ніби ти дивишся на себе з боку.\n\n— Чи складно було працювати над альбомом емоційно?\n\n— Дуже. Деякі пісні я переписувала по кілька разів. Були моменти, коли здавалося, що я не маю права говорити про особисте, коли навколо стільки глобального болю. Але зрозуміла: особисті історії — це теж частина великої історії.\n\n— Ти активно виступаєш у невеликих залах. Чому не переходиш на великі майданчики?\n\n— Камерність для мене важлива. Я хочу бачити очі людей. Коли сцена занадто велика, губиться контакт.\n\n— Як змінилася українська інді-сцена?\n\n— Вона стала сміливішою. Зʼявилося більше артистів, які не намагаються звучати «як хтось», а шукають свій голос.\n\n— Чи відчуваєш відповідальність як публічна людина?\n\n— Так. Особливо зараз. Але я не хочу бути моралізатором. Я музикантка, і моя відповідальність — чесність.\n\n— Яка композиція з альбому для тебе найскладніша?\n\n— «Тиша між нами». Вона дуже мінімалістична, там майже нічого немає — лише голос і кілька акордів. Але саме в цій простоті найбільша вразливість.\n\n— Що далі?\n\n— Хочу зробити акустичний тур. І, можливо, записати міні-альбом із живим оркестром.\n\n— Чого ти боїшся найбільше як артистка?\n\n— Втратити цікавість. Поки мені цікаво — я жива.",
                "category": "Інтервʼю",
                "tags": ["інтервʼю", "рок", "українська", "альбом"],
                "author_username": "journalist",
                "is_featured": True,
                "status": "published",
                "published_at": "2026-02-12T14:00:00Z",
                "meta_title": "Марта Дорош — інтервʼю про новий альбом та інді-сцену",
                "meta_description": "Інді-рок виконавиця Марта Дорош розповідає про новий альбом, воєнний контекст і творчі пошуки."
            },
            {
                "title": "Інтервʼю: Продюсер KOVALSKY про електронну сцену, алгоритми та незалежність",
                "slug": "interviu-prodiuser-kovalsky-pro-elektronnu-stsenu-ta-nezalezhnist",
                "short_description": "Електронний продюсер KOVALSKY розповів про створення треків, вплив алгоритмів стримінгів та майбутнє української електроніки.",
                "content": "— Твоя музика звучить дуже мінімалістично. Це усвідомлений вибір?\n\n— Так. Я вірю, що тиша між звуками іноді важливіша за сам звук. Мінімалізм дозволяє слухачу дихати.\n\n— Як ти ставишся до алгоритмів стримінгових платформ?\n\n— Це нова реальність. Алгоритми можуть допомогти артисту, але можуть і зробити його залежним від трендів. Я намагаюся не писати музику «під алгоритм».\n\n— Чи складно залишатися незалежним продюсером?\n\n— Так, але це дає свободу. Я сам вирішую, коли і що випускати.\n\n— Чи є різниця між українською та європейською електронною сценою?\n\n— Українська сцена зараз дуже жива. Вона ще формується, і це її перевага.\n\n— Який твій робочий процес?\n\n— Зазвичай починаю з ритму. Потім додаю текстури. І тільки в кінці думаю про мелодію.\n\n— Чи використовуєш штучний інтелект у продакшені?\n\n— Тестую інструменти, але поки що це допоміжний інструмент, а не заміна творчості.\n\n— Твій найбільший страх?\n\n— Стати передбачуваним.\n\n— Що буде з електронною музикою через 10 років?\n\n— Вона стане ще більш гібридною. Межі між жанрами зникнуть.",
                "category": "Інтервʼю",
                "tags": ["інтервʼю", "електронна", "аналітика"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-11T18:00:00Z"
            },
            {
                "title": "Інтервʼю: Саксофоніст Андрій Левченко про сучасний український джаз",
                "slug": "interviu-saksofonist-andrii-levchenko-pro-suchasnyi-dzhaz",
                "short_description": "Джазовий музикант Андрій Левченко розповів про імпровізацію, європейські тури та майбутнє українського джазу.",
                "content": "— Андрію, що для вас джаз сьогодні?\n\n— Свобода. Джаз — це постійний діалог. Між музикантами, між сценою та залом.\n\n— Чи відчуваєте ви, що український джаз змінився?\n\n— Так. Він став більш відкритим до експериментів. Молоді музиканти не бояться поєднувати джаз із електронікою або фольклором.\n\n— Ви багато гастролюєте Європою. Чи відрізняється аудиторія?\n\n— Європейська аудиторія більш звикла до імпровізації. Але українська зараз дуже уважна, дуже глибока.\n\n— Як народжується імпровізація?\n\n— Це поєднання досвіду і моменту. Ти повинен знати форму, але дозволити собі вийти за її межі.\n\n— Чи складно розвивати джаз у комерційному середовищі?\n\n— Це не найприбутковіший жанр. Але ті, хто приходить на концерти, приходять не випадково.\n\n— Чи є у вас мрія?\n\n— Записати альбом із великим оркестром і камерним хором.\n\n— Що б ви порадили молодим музикантам?\n\n— Слухати більше, ніж грати. І не боятися тиші.",
                "category": "Інтервʼю",
                "tags": ["інтервʼю", "джаз", "українська", "концерт"],
                "author_username": "journalist",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-10T20:00:00Z"
            },
            {
                "title": "Гурт «Північний Вітер» анонсував перший великий тур Україною за останні три роки",
                "slug": "pivnichnyi-viter-anonsuvav-pershyi-velykyi-tur-ukrainoiu",
                "short_description": "Інді-рок гурт «Північний Вітер» вирушає у масштабний тур десятьма містами України. Старт — у квітні.",
                "content": "Інді-рок гурт «Північний Вітер» оголосив про старт першого великого туру Україною за останні три роки. Концертна серія охопить десять міст, серед яких Київ, Львів, Харків, Дніпро та Одеса.\n\nЗа словами фронтмена гурту, рішення про тур визрівало поступово. «Ми довго не наважувалися на масштабні виступи, але зараз відчуваємо, що готові повернутися до живого контакту з аудиторією», — зазначив музикант у соцмережах.\n\nПрограма туру включатиме як нові композиції з останнього альбому, так і хіти, що принесли гурту популярність на початку кар'єри. Особливу увагу артисти обіцяють приділити візуальній частині шоу — сценографія буде побудована на мінімалістичних світлових рішеннях та відеопроекціях.\n\nПродаж квитків стартує вже цього тижня. Частину прибутку гурт планує передати на підтримку культурних ініціатив у прифронтових регіонах.\n\nОрганізатори очікують, що тур стане одним із найпомітніших концертних проєктів весни.",
                "category": "Новини",
                "tags": ["рок", "українська", "концерт", "тур"],
                "author_username": "editor",
                "is_featured": True,
                "status": "published",
                "published_at": "2026-02-13T10:00:00Z"
            },
            {
                "title": "Електронний дует випустив спільний трек із французьким продюсером",
                "slug": "elektronnyi-duet-spilnyi-trek-iz-frantsuzkym-prodiuserom",
                "short_description": "Український електронний проєкт презентував міжнародну колаборацію з відомим французьким саунд-продюсером.",
                "content": "Український електронний дует «Signal Flow» представив новий трек, записаний у співпраці з французьким продюсером Jean Morel. Композиція отримала назву «Parallel Lines» і вже доступна на всіх цифрових платформах.\n\nТрек поєднує атмосферний хаус із елементами мелодійного техно. За словами учасників дуету, робота над композицією тривала майже пів року та проходила дистанційно.\n\n«Ми обмінювалися демо-файлами, експериментували зі структурою. Французький саунд додав треку особливої глибини», — зазначають музиканти.\n\nРеліз супроводжується мінімалістичним відео, знятим у Києві. Відеоряд побудований на абстрактних світлових інсталяціях.\n\nКритики вже відзначили, що колаборація може стати проривною для української електронної сцени на європейському ринку.",
                "category": "Новини",
                "tags": ["електронна", "колаборація", "премʼєра"],
                "author_username": "journalist",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-13T12:30:00Z"
            },
            {
                "title": "Фестиваль «Open Sound» оголосив перших хедлайнерів літнього сезону",
                "slug": "festival-open-sound-oholosyv-pershykh-khedlaieriv",
                "short_description": "Організатори фестивалю «Open Sound» оприлюднили імена перших хедлайнерів та відкрили ранній продаж квитків.",
                "content": "Музичний фестиваль «Open Sound» оголосив перших хедлайнерів цьогорічного літнього сезону. Серед підтверджених артистів — кілька українських інді-гуртів та міжнародні гості.\n\nФестиваль відбудеться наприкінці червня на відкритій локації поблизу Києва. Організатори обіцяють три сцени, тематичні простори та освітні лекції для молодих музикантів.\n\nЗа словами команди проєкту, акцент цього року зроблено на українських виконавцях. «Ми хочемо показати, наскільки різноманітною є наша сцена», — зазначили організатори.\n\nРанній продаж квитків уже стартував. Очікується, що повний лайнап буде оприлюднений у березні.\n\nМинулого року фестиваль зібрав понад 15 тисяч відвідувачів.",
                "category": "Новини",
                "tags": ["фестиваль", "концерт", "українська"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-12T15:00:00Z"
            },
            {
                "title": "Молода поп-виконавиця представила дебютний міні-альбом",
                "slug": "moloda-pop-vykonavitsia-debiutnyi-mini-albom",
                "short_description": "Артистка презентувала дебютний EP із пʼяти треків, що поєднують поп та R&B.",
                "content": "Молода українська поп-виконавиця LINA презентувала дебютний міні-альбом «First Light». До релізу увійшли пʼять треків, які поєднують елементи сучасного попу та R&B.\n\nАртистка працювала над матеріалом у співпраці з кількома саунд-продюсерами. За її словами, EP став особистим щоденником переживань останніх двох років.\n\n«Я хотіла зробити чесний запис без зайвого глянцю», — розповіла співачка під час онлайн-презентації.\n\nКритики відзначають зрілий вокал та впевнену продюсерську роботу. Особливо позитивні відгуки отримала композиція «Stay», яка вже набирає популярність у соцмережах.\n\nАртистка також анонсувала перші живі виступи у невеликих клубах навесні.",
                "category": "Новини",
                "tags": ["поп", "альбом", "премʼєра", "українська"],
                "author_username": "journalist",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-12T18:00:00Z"
            },
            {
                "title": "Український саундтрек потрапив до міжнародного музичного чарту",
                "slug": "ukrainskyi-saundtrek-potrapyv-do-mizhnarodnoho-chartu",
                "short_description": "Композиція українського композитора увійшла до топ-20 міжнародного стримінгового чарту.",
                "content": "Саундтрек українського композитора до незалежного фільму потрапив до топ-20 міжнародного стримінгового чарту у категорії «Original Score».\n\nКомпозиція, що поєднує оркестрове звучання з електронними елементами, отримала визнання після премʼєри фільму на європейському фестивалі.\n\nМузичні критики відзначають атмосферність та емоційну глибину твору. За словами композитора, робота над саундтреком тривала понад рік.\n\n«Для мене це не просто успіх у чартах, а можливість показати українську музику світові», — зазначив автор.\n\nЕксперти прогнозують, що цей реліз може відкрити нові можливості для українських композиторів у сфері кіно.",
                "category": "Новини",
                "tags": ["нагорода", "українська", "премʼєра"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-11T09:00:00Z"
            },
            {
                "title": "Рецензія: «Світло всередині» — найзріліший альбом гурту «Місто Хвиль»",
                "slug": "retsenziia-svitlo-vseredyni-misto-khvyl",
                "short_description": "Новий альбом інді-рок гурту демонструє емоційну глибину, продуману структуру та сміливі експерименти зі звучанням.",
                "content": "Четвертий студійний альбом гурту «Місто Хвиль» став несподівано стриманим, але при цьому найбільш цілісним у їхній дискографії. Якщо попередні роботи тяжіли до гітарної експресії, то «Світло всередині» звучить значно більш атмосферно.\n\nПерший трек одразу задає настрій — мінімалістичний вступ поступово переростає у щільний саунд із багатошаровими синтезаторами. Вокал фронтмена звучить упевненіше й глибше, ніж раніше.\n\nОсобливої уваги заслуговує композиція «Після дощу», де гурт відмовляється від стандартної куплетно-приспівної структури. Трек розвивається як історія, поступово нарощуючи напругу.\n\nПродакшн альбому чистий і збалансований. Гітарні партії не перевантажують простір, а ритм-секція звучить чітко й структуровано.\n\nТексти стали більш особистими. Ліричний герой більше не говорить абстрактно — він проживає конкретні емоції.\n\nУ підсумку «Світло всередині» — це альбом, який варто слухати повністю, не перемикаючи треки. Оцінка: 9/10.",
                "category": "Рецензії",
                "tags": ["альбом", "рок", "українська"],
                "author_username": "critic",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-13T18:00:00Z"
            },
            {
                "title": "Рецензія: електронний реліз «Night Frequencies» — гіпнотична подорож у мінімалізм",
                "slug": "retsenziia-night-frequencies-elektronna-podorozh",
                "short_description": "Новий альбом електронного продюсера поєднує техно, ембієнт і мелодійний хаус у продуманій концептуальній роботі.",
                "content": "«Night Frequencies» — це альбом, який не кричить, а шепоче. Продюсер відмовляється від очевидних дропів і натомість будує треки на поступовому розвитку текстур.\n\nВідкриваюча композиція задає глибоку атмосферу: повільний темп, глухий бас і ледь помітні синтезаторні лінії. Слухач поступово занурюється у звуковий простір.\n\nУ середині альбому зʼявляються більш ритмічні треки, але навіть вони не втрачають стриманості. Автор майстерно працює з паузами та динамікою.\n\nСильна сторона релізу — цілісність. Усі композиції логічно повʼязані між собою.\n\nЦе музика для нічних поїздок або зосередженого прослуховування у навушниках.\n\nОцінка: 8,7/10.",
                "category": "Рецензії",
                "tags": ["електронна", "альбом"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-12T20:00:00Z"
            },
            {
                "title": "Рецензія: дебютний поп-альбом LINA — щирість без зайвого глянцю",
                "slug": "retsenziia-debiutnyi-pop-albom-lina",
                "short_description": "Молода артистка демонструє емоційну відкритість та сильний вокал у своєму першому повноформатному релізі.",
                "content": "Дебютний альбом LINA — це приклад сучасного українського попу без надмірної комерційності. Артистка не намагається копіювати західні формати, а шукає власну інтонацію.\n\nПерші треки звучать енергійно, але вже в середині платівки на перший план виходять ліричні композиції. Вокал LINA переконливий і технічно стабільний.\n\nПродакшн акуратний, без перевантаження ефектами. Особливо вдало звучать треки з живими інструментами.\n\nДебют показує великий потенціал. Оцінка: 8/10.",
                "category": "Рецензії",
                "tags": ["поп", "альбом", "українська"],
                "author_username": "critic",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-11T16:00:00Z"
            },
            {
                "title": "Рецензія: джазовий альбом «Urban Silence» — діалог саксофона і міста",
                "slug": "retsenziia-urban-silence-dzhaz",
                "short_description": "Сучасний джазовий реліз, що поєднує імпровізацію, урбаністичну атмосферу та камерне звучання.",
                "content": "«Urban Silence» — це джаз, що звучить як вечірній мегаполіс. Альбом будується на діалозі саксофона та фортепіано, створюючи відчуття інтимної розмови.\n\nІмпровізації не хаотичні — вони структуровані й продумані. Музиканти чітко відчувають форму.\n\nОсобливо варто відзначити баланс між експериментом і доступністю. Альбом не лякає складністю, але й не спрощує жанр.\n\nРобота звучить камерно, але масштабно емоційно.\n\nОцінка: 9/10.",
                "category": "Рецензії",
                "tags": ["джаз", "альбом", "українська"],
                "author_username": "journalist",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-10T17:00:00Z"
            },
            {
                "title": "Рецензія: експериментальний реліз «Fragments» — музика на межі жанрів",
                "slug": "retsenziia-fragments-eksperymentalnyi-relyz",
                "short_description": "Новий альбом поєднує електроніку, неокласику та польові записи, створюючи атмосферний саундтрек до сучасності.",
                "content": "«Fragments» — це не просто альбом, а звуковий експеримент. Автор поєднує електронні текстури з живими струнними та записами навколишнього середовища.\n\nКомпозиції не мають чіткої структури — вони розгортаються поступово, іноді несподівано обриваючись.\n\nСлухачу доведеться бути уважним: ця музика вимагає концентрації.\n\nАльбом навряд чи стане масовим, але точно знайде свою аудиторію серед поціновувачів альтернативного саунду.\n\nОцінка: 8,3/10.",
                "category": "Рецензії",
                "tags": ["електронна", "альбом", "експериментальна"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-09T19:00:00Z"
            },
            {
                "title": "Стрімінг проти радіо: як змінюється музичне споживання в Україні",
                "slug": "striminh-proty-radio-iak-zminiuietsia-muzychne-spozhyvannia",
                "short_description": "Аналітичний матеріал про трансформацію музичного ринку: стримінгові платформи витісняють традиційне радіо.",
                "content": "За останні пʼять років модель споживання музики в Україні суттєво змінилася. Якщо раніше радіостанції формували смаки аудиторії, то сьогодні дедалі більшу роль відіграють стримінгові платформи.\n\nЗгідно з відкритими дослідженнями ринку, понад 70% слухачів віком до 30 років використовують стримінгові сервіси як основне джерело музики. Радіо залишається популярним серед старшої аудиторії, але його вплив на молодь поступово зменшується.\n\nАлгоритмічні рекомендації змінюють спосіб відкриття нових артистів. Якщо раніше слухач знайомився з музикою через ефір, то тепер це персоналізовані плейлисти.\n\nВодночас стримінг створює нові виклики для артистів. Конкуренція значно зросла, а боротьба за увагу слухача стала складнішою.\n\nРадіостанції намагаються адаптуватися, розвиваючи онлайн-платформи та подкасти. Однак експерти прогнозують, що майбутнє музичного споживання — за гібридними моделями.\n\nТаким чином, музична індустрія переходить від централізованої моделі до децентралізованої, де слухач стає активним учасником формування трендів.",
                "category": "Аналітика",
                "tags": ["аналітика", "українська"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-14T12:00:00Z"
            },
            {
                "title": "Музика під час війни: як змінюється роль артиста в суспільстві",
                "slug": "muzyka-pid-chas-viiny-rol-artysta-v-suspilstvi",
                "short_description": "Глибокий аналіз трансформації музичної сцени в умовах воєнного часу та нової соціальної відповідальності.",
                "content": "Воєнний контекст кардинально змінив українську музичну сцену. Артисти більше не лише творці розваги — вони стають голосами суспільства.\n\nКонцерти дедалі частіше мають благодійний характер. Частина музикантів поєднує творчість із волонтерською діяльністю.\n\nТематика пісень також трансформувалася. У текстах зʼявилися теми втрати, стійкості та солідарності.\n\nВодночас зросла міжнародна увага до українських артистів. Фестивалі та європейські сцени відкриваються для нових імен.\n\nЕксперти зазначають, що музика в такі періоди виконує терапевтичну функцію. Вона допомагає пережити травматичний досвід.\n\nУ довгостроковій перспективі ця трансформація може сформувати нову культурну ідентичність української сцени.",
                "category": "Аналітика",
                "tags": ["аналітика", "українська"],
                "author_username": "journalist",
                "is_featured": True,
                "status": "published",
                "published_at": "2026-02-14T15:00:00Z"
            },
            {
                "title": "7 українських рок-гуртів, які варто додати у свій плейлист",
                "slug": "7-ukrainskykh-rok-hurtiv-dlia-pleylista",
                "short_description": "Добірка сучасних українських рок-гуртів, що формують нову хвилю альтернативної сцени.",
                "content": "Українська рок-сцена продовжує розвиватися. Ми зібрали сім гуртів, які варто відкрити для себе цього року.\n\n1. «Місто Хвиль» — атмосферний інді-рок із глибокими текстами.\n2. «Сонячний Пил» — експресивне звучання з елементами пост-року.\n3. «Грань» — альтернативний рок із соціальною тематикою.\n4. «White Echo» — мелодійні гітарні рифи.\n5. «Північний Вітер» — ліричний інді-рок.\n6. «Тиша Лісу» — мінімалістичний альтернативний саунд.\n7. «No Signal» — експериментальний рок із електронними вставками.\n\nЦі гурти демонструють різноманітність сучасної української сцени.",
                "category": "Добірки",
                "tags": ["рок", "українська"],
                "author_username": "critic",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-13T19:00:00Z"
            },
            {
                "title": "5 електронних релізів для нічних поїздок",
                "slug": "5-elektronnykh-relyziv-dlia-nichnykh-poizdok",
                "short_description": "Музична добірка атмосферних електронних треків для пізніх вечорів та довгих доріг.",
                "content": "Нічна дорога має свій ритм. Ми зібрали пʼять електронних релізів, які ідеально підійдуть для вечірніх поїздок.\n\n1. «Night Frequencies» — гіпнотичний мінімал.\n2. «Parallel Lines» — мелодійний хаус.\n3. «City Lights» — ембієнт із глибоким басом.\n4. «Midnight Drive» — повільне техно.\n5. «Echoes» — атмосферний електронний саунд.\n\nЦі треки створюють відчуття руху та простору.",
                "category": "Добірки",
                "tags": ["електронна"],
                "author_username": "editor",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-13T21:00:00Z"
            },
            {
                "title": "6 джазових композицій для спокійного ранку",
                "slug": "6-dzhazovykh-kompozytsii-dlia-spokiinoho-ranku",
                "short_description": "Легка джазова добірка для ранкового настрою та концентрації.",
                "content": "Джаз — ідеальний супровід для ранкової кави. Ось шість композицій, які створять правильний настрій.\n\n1. «Urban Silence» — мʼякий саксофон.\n2. «Blue Horizon» — класичний фортепіанний джаз.\n3. «Morning Light» — легка імпровізація.\n4. «Quiet Steps» — камерна атмосфера.\n5. «Golden Air» — мінімалістичний саунд.\n6. «Warm Notes» — мелодійний сучасний джаз.\n\nЦя добірка підійде для тихого старту дня та концентрації.",
                "category": "Добірки",
                "tags": ["джаз", "українська"],
                "author_username": "journalist",
                "is_featured": False,
                "status": "published",
                "published_at": "2026-02-12T09:00:00Z"
            }
        ]
        
        # Створити користувачів, якщо їх немає
        users_to_create = [
            {'username': 'editor', 'first_name': 'Редактор', 'last_name': 'Сайту', 'email': 'editor@example.com'},
            {'username': 'journalist', 'first_name': 'Журналіст', 'last_name': 'Музичний', 'email': 'journalist@example.com'},
            {'username': 'critic', 'first_name': 'Критик', 'last_name': 'Музичний', 'email': 'critic@example.com'},
        ]
        
        for user_data in users_to_create:
            user, created = User.objects.get_or_create(
                username=user_data['username'],
                defaults=user_data
            )
            if created:
                user.set_password('password123')
                user.save()
                self.stdout.write(f'  ✓ Створено користувача: {user.username}')
        
        # Імпортувати статті
        self.stdout.write('\nІмпорт нових статей...')
        imported_count = 0
        
        for article_data in articles_data:
            try:
                # Отримати автора
                author = User.objects.get(username=article_data['author_username'])
                
                # Отримати категорію
                category = None
                if article_data.get('category'):
                    category = Category.objects.filter(name=article_data['category']).first()
                
                # Парсити дату публікації
                published_at = None
                if article_data.get('published_at'):
                    try:
                        published_at = datetime.fromisoformat(article_data['published_at'].replace('Z', '+00:00'))
                    except:
                        published_at = timezone.now()
                
                # Перевірити, чи стаття вже існує (якщо режим append)
                if append_mode:
                    existing = Article.objects.filter(slug=article_data.get('slug', '')).first()
                    if existing:
                        self.stdout.write(f'  ⊘ Пропущено (вже існує): {article_data["title"]}')
                        continue
                
                # Створити статтю
                article = Article.objects.create(
                    title=article_data['title'],
                    slug=article_data.get('slug', ''),
                    short_description=article_data['short_description'],
                    content=article_data['content'],
                    author=author,
                    category=category,
                    is_featured=article_data.get('is_featured', False),
                    status=article_data.get('status', 'published'),
                    published_at=published_at,
                    meta_title=article_data.get('meta_title', ''),
                    meta_description=article_data.get('meta_description', ''),
                )
                
                # Додати теги
                if article_data.get('tags'):
                    for tag_name in article_data['tags']:
                        tag, _ = Tag.objects.get_or_create(name=tag_name)
                        article.tags.add(tag)
                
                imported_count += 1
                self.stdout.write(f'  ✓ Імпортовано: {article.title}')
                
            except Exception as e:
                self.stdout.write(self.style.ERROR(f'  ✗ Помилка при імпорті "{article_data.get("title", "невідома")}": {str(e)}'))
        
        self.stdout.write(self.style.SUCCESS(f'\n✓ Успішно імпортовано {imported_count} статей!'))

